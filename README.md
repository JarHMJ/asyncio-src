# asyncio-src
asyncioæºç è§£æ

1. ç°é˜¶æ®µç›®æ ‡å…ˆé€šè¯»ä¸€éæºç ï¼Œå†™å¥½æ³¨é‡Šã€‚
2. ä¹‹åä¼šç”»å‡ºæµç¨‹å›¾ï¼Œè¡¥å……è¯»æ‡‚æºç çš„é¢å¤–çŸ¥è¯†ï¼Œå°½æƒ…æœŸå¾…ğŸ˜ğŸ˜ï¼


### é˜…è¯»é¡ºåº
1. ä»`asyncio.run()`å¼€å§‹ï¼Œä¼ å…¥ä¸€ä¸ªåç¨‹å¯¹è±¡`main`ï¼Œè¿”å›ä¸€ä¸ª`loop.run_until_complete(main)`ã€‚
é‡Œé¢å¤§æ¦‚æ‰§è¡Œäº†å¦‚ä¸‹å‡ ä¸ªå…³é”®çš„å‡½æ•°
    1. `events.new_event_loop()` åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¾ªç¯
    2. `events.set_event_loop(loop)` è®¾ç½®loopä¸ºå½“å‰çš„äº‹ä»¶å¾ªç¯
    3. `loop.run_until_complete(main)` è¿è¡Œäº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°Futureå®Œæˆ
    
2. `loop.run_until_complete()`é‡Œé¢æ‰§è¡Œçš„æ˜¯`run_forever()`ã€‚
    1. `run_forever()`ä¸­è®¾ç½®äº†_running_loop,ç„¶åä¸€ç›´è°ƒç”¨`_run_once()`è¿™ä¸ªæ–¹æ³•ï¼Œ
    å¯ä»¥è¯´è¿™ä¸ªæ–¹æ³•æ˜¯ä»»åŠ¡çš„æ ¸å¿ƒè°ƒåº¦,é…åˆselect/epollç­‰ç³»ç»Ÿè°ƒç”¨å®Œæˆäº‹ä»¶å¾ªç¯ã€‚
    2. `_run_once()`è¿™ä¸ªæ–¹æ³•çš„é€»è¾‘æ˜¯å…ˆæŠŠæ•´ç†`_scheduled`çš„è¦æ‰§è¡Œçš„å’Œ`selcet`ä¸­å°±ç»ªçš„äº‹ä»¶
    æ·»åŠ åˆ°`_ready`é˜Ÿåˆ—ä¸­å»ï¼Œç„¶åéå†`_ready`é˜Ÿåˆ—ï¼ˆ `collections.deque()`ï¼‰,å¯¹åˆ—ä¸­çš„ä»»åŠ¡å…¶å®ä¸€ä¸ª`handle`
    å¯¹è±¡ï¼Œæ‰§è¡Œ`handle._run()`ä¼šå»è°ƒç”¨ `Task._step()`æ–¹æ³•, `_step()`å®é™…è°ƒç”¨çš„æ˜¯`coro.send(None)`ã€‚
    3. `coro.send(None)`æ˜¯åç¨‹ä¸­çš„æ¦‚å¿µï¼Œå®ƒä¼šæ¥ç€ä¸Šæ¬¡`yeild`çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚
    
    
    
    

# ...